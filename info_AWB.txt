
ssh -X -Y abrinke1@gpu005
cd /cms/data/abrinke1/CMSSW/HiggsToAA/ParticleNet/

https://github.com/hqucms/weaver#readme
git clone git@github.com:hqucms/weaver.git

# create a new conda environment
conda create -n weaver python=3.7

# activate the environment
conda activate weaver

# install the necessary python packages
pip install numpy pandas scikit-learn scipy matplotlib tqdm PyYAML

# install uproot for reading/writing ROOT files
pip install uproot3 awkward0 lz4 xxhash

# install PyTables if using HDF5 files
pip install tables

# install onnxruntime if needs to run inference w/ ONNX models
pip install onnxruntime-gpu

# install tensorboard for visualization
pip install tensorboard

# install pytorch, follow instructions for your OS/CUDA version at:
# https://pytorch.org/get-started
pip install torch
conda install pytorch torchvision torchaudio pytorch-cuda=11.7 -c pytorch -c nvidia

-----------------------------------------------------------------------------------

conda activate weaver
mkdir output

python train.py --data-train '/cms/data/store/user/abrinke1/Trees/HtoAAto4B/ParticleNet/Ntuples/2022_11_14/*root' --data-config data/Hto4b_ak8_points_pf_sv_full.yaml --network-config networks/particle_net_pf_sv.py --num-epochs 10 --model-prefix output/M-all-E10

python train.py --predict --data-test '/cms/data/store/user/abrinke1/Trees/HtoAAto4B/ParticleNet/Ntuples/2022_11_14/*root' --data-config data/Hto4b_ak8_points_pf_sv_full.yaml --network-config networks/particle_net_pf_sv.py --model-prefix output/M-all-E10 --predict-output output/predict_M-all-E10.root

python train.py --regression-mode --data-train '/cms/data/store/user/abrinke1/Trees/HtoAAto4B/ParticleNet/Ntuples/2022_11_14/AK8_HToAA*.root' --data-config data/Hto4b_ak8_points_pf_sv_mass_regression.yaml --network-config networks/particle_net_pf_sv_mass_regression.py --num-epochs 40 --model-prefix output/M-regr-E40

python train.py --predict --regression-mode --data-test '/cms/data/store/user/abrinke1/Trees/HtoAAto4B/ParticleNet/Ntuples/2022_11_14/*.root' --data-config data/Hto4b_ak8_points_pf_sv_mass_regression.yaml --network-config networks/particle_net_pf_sv_mass_regression.py --model-prefix output/M-regr-E40 --predict-output output/predict_M-regr-E40.root

-----------------------------------------------------------------------------------

git remote add abrinke1 git@github.com:abrinke1/weaver.git
git checkout -b AWB_Hto4b_dev
git add files_to_add
git commit -m "Commit message"
git push abrinke1 
